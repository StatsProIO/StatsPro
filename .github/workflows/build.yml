name: 'Build'

on:
  workflow_call:
    inputs:
      environment:
        required: true
        type: string
    secrets:
      DOT_ENV:
        required: true
      STACKHERO_DOCKER_CERTIFICATES_PASSWORD:
        required: true
      STACKHERO_DOCKER_HOST:
        required: true
      STACKHERO_DOCKER_SERVICE_ID:
        required: true


jobs:
    build_job:
      name: "Build Job"
      environment: ${{ inputs.environment }}
      runs-on: ubuntu-latest
      steps:
        - name: curl dockerhos
          shell: bash
          run: |
            echo "time_namelookup:  %{time_namelookup}s\n
            time_connect:  %{time_connect}s\n
            time_appconnect:  %{time_appconnect}s\n
            time_pretransfer:  %{time_pretransfer}s\n
            time_redirect:  %{time_redirect}s\n
            time_starttransfer:  %{time_starttransfer}s\n
            ----------\n
            time_total:  %{time_total}s\n" > curl-format.txt
            curl -w "@curl-format.txt" -s --connect-timeout 60 --max-time 120 https://rhzhe3.stackhero-network.com
            curl -w "@curl-format.txt" -s --connect-timeout 60 --max-time 120 https://rhzhe3.stackhero-network.com
            curl -w "@curl-format.txt" -s --connect-timeout 60 --max-time 120 https://rhzhe3.stackhero-network.com
            curl -w "@curl-format.txt" -s --connect-timeout 60 --max-time 120 https://rhzhe3.stackhero-network.com
